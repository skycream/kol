# 한국어 OCR 인식률 향상 가이드

## 1. 이미지 전처리 기법

### 필수 전처리 단계
1. **해상도 향상**: 최소 300 DPI, 권장 600 DPI
2. **노이즈 제거**: Non-local Means Denoising
3. **대비 향상**: CLAHE (Contrast Limited Adaptive Histogram Equalization)
4. **이진화**: Otsu's method 또는 Adaptive thresholding
5. **기울기 보정**: Hough 변환 기반 자동 보정
6. **모폴로지 연산**: 텍스트 연결성 개선

### 문서 유형별 최적 설정
- **깨끗한 문서**: 기본 이진화 + 가벼운 노이즈 제거
- **오래된/낡은 문서**: 강력한 노이즈 제거 + CLAHE + 모폴로지 연산
- **신문/잡지**: 배경 제거 + 적응형 이진화
- **손글씨**: 세선화(thinning) + 문자 분리

## 2. OCR 엔진 선택 가이드

### Tesseract
- **장점**: 무료, 다양한 언어 지원, 커스터마이징 가능
- **단점**: 한국어 인식률이 상대적으로 낮음
- **최적 설정**:
  ```
  --oem 1 (LSTM 모드)
  --psm 6 (균일한 텍스트 블록)
  --psm 11 (희소 텍스트)
  ```

### EasyOCR
- **장점**: 딥러닝 기반, 한국어 인식률 높음
- **단점**: 처리 속도 느림, GPU 권장
- **최적 사용**: 복잡한 레이아웃, 혼합 언어 문서

### 상용 OCR (네이버 Clova, 카카오 등)
- **장점**: 최고 수준의 한국어 인식률
- **단점**: 유료, API 제한
- **최적 사용**: 중요 문서, 대량 처리

## 3. 한국어 특화 후처리

### 일반적인 오류 패턴
1. **숫자-한글 혼동**:
   - 0 ↔ ㅇ
   - 1 ↔ ㅣ, l
   - 2 ↔ ㄱ
   - 8 ↔ ㅂ

2. **자모 오인식**:
   - ㅐ, ㅔ → H
   - ㅚ → H.
   - ㅢ → -|

3. **띄어쓰기 오류**:
   - 조사 분리: "나 는" → "나는"
   - 과도한 띄어쓰기: "서 울 특 별 시" → "서울특별시"

### 후처리 전략
1. **패턴 기반 수정**: 정규표현식으로 일반적 오류 수정
2. **사전 기반 검증**: 한국어 사전과 대조
3. **문맥 기반 수정**: N-gram 모델 활용
4. **기계학습 기반**: 오류 패턴 학습 모델

## 4. 실전 최적화 팁

### 처리 속도 vs 정확도
1. **빠른 처리**: Tesseract + 기본 전처리
2. **균형**: Tesseract LSTM + 중간 전처리
3. **최고 정확도**: EasyOCR + 고급 전처리 + 후처리

### 메모리 최적화
- 대용량 PDF는 페이지별 처리
- 이미지 크기 조절 (과도한 해상도 지양)
- 처리 완료된 이미지 즉시 메모리 해제

### 병렬 처리
```python
from multiprocessing import Pool

def process_page(page_data):
    # 페이지별 OCR 처리
    pass

with Pool(processes=4) as pool:
    results = pool.map(process_page, pages)
```

## 5. 품질 평가 지표

### 정량적 지표
- **CER (Character Error Rate)**: 문자 수준 오류율
- **WER (Word Error Rate)**: 단어 수준 오류율
- **한국어 인식률**: 전체 문자 중 한글 비율

### 정성적 평가
- 문서 구조 보존 여부
- 특수문자/기호 인식
- 표/그림 내 텍스트 인식

## 6. 트러블슈팅

### 인식률이 낮을 때
1. DPI 확인 (300 이상)
2. 이미지 품질 확인 (선명도, 대비)
3. 문서 기울기 확인
4. 다른 OCR 엔진 시도
5. 전처리 강도 조절

### 처리 속도가 느릴 때
1. 이미지 크기 최적화
2. 병렬 처리 적용
3. GPU 활용 (EasyOCR)
4. 불필요한 전처리 단계 제거

## 7. 추천 워크플로우

### 일반 문서
```
PDF → 300 DPI 변환 → 그레이스케일 → 노이즈 제거 → 
이진화 → Tesseract LSTM → 후처리
```

### 고품질 요구 문서
```
PDF → 600 DPI 변환 → 전처리 (고급) → 
다중 OCR (Tesseract + EasyOCR) → 결과 병합 → 
고급 후처리 → 검증
```

### 대량 처리
```
PDF 분할 → 병렬 처리 → 
페이지별 최적 방법 선택 → 
결과 통합 → 일괄 후처리
```